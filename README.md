# OpenCV DNN Real-Time Detection — Face + Eyes + Tracking + FPS (CLI)

**Repo:** opencv-real-time-detection  
**Author:** Adarsh Ravi  
**Tech:** Python, OpenCV (DNN), NumPy  
**Features:** DNN face detection, Haar eye detection, SORT-style tracking (IoU), FPS overlay, CLI, screenshots, video output.

---

## 1) Overview

This project demonstrates a portfolio-grade real-time computer vision pipeline using OpenCV:

- **DNN-based face detection** (OpenCV `dnn` module using a Caffe SSD model)
- **Multi-class detection**: face + eyes (eyes detected inside face ROI)
- **SORT-style tracking** (IoU-based tracker) to maintain stable IDs across frames
- **FPS measurement** for performance awareness
- **CLI interface** for reproducible runs and configurable outputs
- **Saved outputs**: screenshots (JPG) and recorded video (MP4)

This is designed to be beginner-friendly but structured like a real CV application.

---

## 2) Demo Outputs

Example outputs (generated by you and saved into `assets/`):
- `assets/example_screenshot.jpg` (face boxes + eye boxes + IDs + FPS)
- `assets/example_output.mp4` (optional)

---

## 3) Repository Structure

opencv-real-time-detection/
├── src/rtcv/
│   ├── app.py          # realtime pipeline
│   ├── cli.py          # argparse CLI
│   ├── dnn_detector.py # DNN face detector (SSD)
│   ├── eye_detector.py # Haar eye detector (within face ROI)
│   ├── tracker.py      # IoU tracker (SORT-style)
│   └── fps.py          # FPS tracker
├── scripts/
│   └── run.py          # main entrypoint
├── data/
│   ├── models/
│   │   ├── dnn/
│   │   │   ├── deploy.prototxt
│   │   │   └── res10_300x300_ssd_iter_140000_fp16.caffemodel
│   │   └── haar/
│   │       └── haarcascade_eye.xml
│   └── samples/
│       └── lena.jpg
├── outputs/            # generated at runtime (ignored)
├── assets/             # sample outputs for GitHub preview
└── README.md

code 

---

## 4. Setup (Terminal Only)

### Create and activate venv
```bash
python -m venv .venv
source .venv/bin/activate
python -m pip install --upgrade pip
pip install opencv-python numpy
pip freeze > requirements.txt
```

## Run

```bash

python scripts/run.py --source 0 --eyes --save-video outputs/videos/out.mp4
```
## Run  (Video-file)
```bash

python scripts/run.py --source path/to/video.mp4 --eyes --save-video outputs/videos/video_out.mp4```

##Run headless
```
python scripts/run.py --source 0 --save-video outputs/videos/out.mp4 --no-display
```

## CLI options
```
python scripts/run.py --help
```
Key options:
	•	--source : webcam index (0) or video path
	•	--conf : DNN confidence threshold
	•	--iou : tracker IoU threshold
	•	--max-misses : track removal policy
	•	--eyes : enable eye detection inside faces
	•	--save-video : save MP4 output
	•	--out-dir : output directory base
	•	--no-display : run without window
## 9) Technical Notes

DNN Face Detector

Uses OpenCV’s DNN Caffe SSD face detector:
	•	config: deploy.prototxt
	•	weights: res10_300x300_ssd_iter_140000_fp16.caffemodel

Multi-class (Face + Eyes)

Faces are detected via DNN.
Eyes are detected via Haar cascade inside the face bounding box region.

Tracking (SORT-style)

A lightweight IoU tracker assigns stable IDs to faces across frames.
This is inspired by SORT matching logic and is intentionally simple for learning.

## 10) Future Upgrades
	•	Replace IoU tracker with full Kalman SORT
	•	Add YOLO (ONNX) for multi-class object detection
	•	Add ByteTrack for stronger tracking robustness
	•	Add unit tests + CI

```
---

# Step 13 — Commit upgrade
```bash
git add .
git commit -m "Upgrade: DNN face detection + eyes + SORT-style tracking + CLI + saved outputs"
```


